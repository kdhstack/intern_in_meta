name: React Build and Deploy (using gh-pages npm script)

on:
# ... (생략)

jobs:
  build_and_deploy:
# ... (생략)
    steps:
      - name: 🛑 Checkout Code
        uses: actions/checkout@v4
        
      - name: 🛠️ Set up Node.js with Caching
        uses: actions/setup-node@v4
        with:
          node-version: '20' 
          cache: 'npm' 
          cache-dependency-path: prj/package-lock.json 

      - name: 📦 Install dependencies
        run: npm install 
        working-directory: ./prj 

      # 💡 핵심 수정: Git 사용자 정보 설정 단계 추가
      - name: 👤 Configure Git User
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
        working-directory: ./prj # Git 명령도 prj 폴더 내에서 실행되도록 지정

      - name: ⚙️ Run Build and Deploy Script
        run: npm run deploy
        working-directory: ./prj
