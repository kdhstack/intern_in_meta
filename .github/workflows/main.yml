name: Deploy with gh-pages NPM Package

on:
  push:
    branches:
      - main # main 브랜치에 푸시될 때 실행

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    
    # gh-pages 브랜치에 푸시할 권한이 필요합니다.
    permissions:
      contents: write 

    steps:
      - name: 🛑 Checkout Code
        uses: actions/checkout@v4
        
      - name: 🛠️ Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # 프로젝트에 맞는 Node.js 버전 지정
          cache: 'npm' # npm 캐싱 활성화

      - name: 📦 Install dependencies
        # gh-pages 패키지가 devDependencies에 설치되어 있다고 가정합니다.
        run: npm install 
        
      - name: ⚙️ Build and Deploy
        # package.json의 deploy 스크립트 실행
        run: npm run deploy
