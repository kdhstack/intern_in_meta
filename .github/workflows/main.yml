name: React Build and Deploy (using gh-pages npm script)

on:
  push:
    branches:
      - main # main ë¸Œëœì¹˜ì— ì½”ë“œë¥¼ í‘¸ì‹œí•  ë•Œë§ˆë‹¤ ì‹¤í–‰

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    
    # gh-pages ë¸Œëœì¹˜ì— í‘¸ì‹œí•  ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
    permissions:
      contents: write 

    steps:
      - name: ğŸ›‘ Checkout Code
        uses: actions/checkout@v4
        
      - name: ğŸ› ï¸ Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # í”„ë¡œì íŠ¸ì— ì‚¬ìš©ëœ Node.js ë²„ì „(v18, v20 ë“±)ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
          cache: 'npm' # package-lock.json ê¸°ë°˜ìœ¼ë¡œ ì˜ì¡´ì„± ìºì‹± (ì˜¤ë¥˜ ë°©ì§€ ë° ì†ë„ í–¥ìƒ)

      - name: ğŸ“¦ Install dependencies
        # package-lock.jsonì— ë”°ë¼ ì˜ì¡´ì„± ì„¤ì¹˜. gh-pages íŒ¨í‚¤ì§€ë„ ì—¬ê¸°ì„œ ì„¤ì¹˜ë©ë‹ˆë‹¤.
        run: npm install 
        
      - name: âš™ï¸ Run Build and Deploy Script
        # ì´ ëª…ë ¹ì€ package.jsonì— ì •ì˜ëœ 'predeploy'(npm run build)ì™€ 'deploy'ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.
        run: npm run deploy
