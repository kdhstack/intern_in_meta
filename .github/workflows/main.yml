name: React Build and gh-pages Deploy

on:
  push:
    branches:
      - main # ì½”ë“œê°€ ì•ˆì •í™”ëœ main ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ ì‹¤í–‰

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    # gh-pages ë¸Œëœì¹˜ì— í‘¸ì‹œí•  ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.
    permissions:
      contents: write 

    steps:
      - name: ğŸ›‘ Checkout Code
        uses: actions/checkout@v4
        
      - name: ğŸ› ï¸ Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # í”„ë¡œì íŠ¸ì— ë§ëŠ” Node.js ë²„ì „ ì§€ì •
          cache: 'npm'
        
      - name: ğŸ“¦ Install dependencies
        run: npm install
        
      - name: âš™ï¸ Build Project
        # React í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰. 
        # ì´ ë‹¨ê³„ì—ì„œ './build' í´ë”ì— ë°°í¬í•  ì •ì  íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.
        run: npm run build
        
      - name: ğŸš€ Deploy to GitHub Pages (gh-pages branch)
        uses: peaceiris/actions-gh-pages@v3
        with:
          # GitHub í† í°ì„ ì‚¬ìš©í•˜ì—¬ gh-pages ë¸Œëœì¹˜ì— í‘¸ì‹œí•  ê¶Œí•œì„ ì–»ìŠµë‹ˆë‹¤.
          # GITHUB_TOKENì€ GitHub Actionsì—ì„œ ìë™ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # ë¹Œë“œëœ ì •ì  íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. (Create React App ê¸°ë³¸ê°’: build)
          publish_dir: ./build 
          # ë°°í¬ ë©”ì‹œì§€ ì§€ì • (ì„ íƒ ì‚¬í•­)
          # publish_message: 'Automatic deploy from GitHub Actions'
